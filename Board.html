<html>
<head>
<title>main.cpp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bbb529;}
.s1 { color: #a9b7c6;}
.s2 { color: #6a8759;}
.s3 { color: #cc7832;}
.s4 { color: #6897bb;}
.s5 { color: #808080;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
main.cpp</font>
</center></td></tr></table>
<pre><span class="s0">#include </span><span class="s2">&lt;iostream&gt;</span>
<span class="s0">#include </span><span class="s2">&lt;fstream&gt;</span>
<span class="s0">#include </span><span class="s2">&lt;vector&gt;</span>

<span class="s3">int </span><span class="s1">main() {</span>

    <span class="s3">double </span><span class="s1">L = </span><span class="s4">2.0</span><span class="s3">;    </span><span class="s5">// Length of board</span>
    <span class="s3">double </span><span class="s1">W = </span><span class="s4">1.0</span><span class="s3">;    </span><span class="s5">// Width of board</span>
    <span class="s3">int </span><span class="s1">Nx = </span><span class="s4">50</span><span class="s3">;    </span><span class="s5">// Number of grid points in the x direction</span>
    <span class="s3">int </span><span class="s1">Ny = </span><span class="s4">25</span><span class="s3">;    </span><span class="s5">// Number of grid points in the y direction</span>
    <span class="s3">double </span><span class="s1">dx = L / Nx</span><span class="s3">;  </span><span class="s5">// Delta-x</span>
    <span class="s3">double </span><span class="s1">dy = W / Ny</span><span class="s3">;  </span><span class="s5">// Delta-y</span>
    <span class="s3">int </span><span class="s1">nt = </span><span class="s4">500</span><span class="s3">;           </span><span class="s5">// Number of temporal steps</span>
    <span class="s3">double </span><span class="s1">dt = </span><span class="s4">0.01</span><span class="s3">;          </span><span class="s5">// Time step size</span>
    <span class="s3">double </span><span class="s1">Cp = </span><span class="s4">0.897</span><span class="s3">;         </span><span class="s5">// Cp (Aluminum)</span>
    <span class="s3">double </span><span class="s1">Rho = </span><span class="s4">2700</span><span class="s3">;         </span><span class="s5">// Density (Aluminum)</span>
    <span class="s3">double </span><span class="s1">C = Cp * Rho</span><span class="s3">;        </span><span class="s5">// For Convenience</span>
    <span class="s3">int </span><span class="s1">a = </span><span class="s4">10</span><span class="s3">;</span>
    <span class="s3">int </span><span class="s1">iplus = </span><span class="s4">0</span><span class="s3">;</span>
    <span class="s5">// Initialize Temp. array</span>
    <span class="s1">std::vector&lt;std::vector&lt;</span><span class="s3">double</span><span class="s1">&gt;&gt; Temperature(Nx</span><span class="s3">, </span><span class="s1">std::vector&lt;</span><span class="s3">double</span><span class="s1">&gt;(Ny</span><span class="s3">, </span><span class="s4">20.0</span><span class="s1">))</span><span class="s3">;</span>

    <span class="s5">// Apply boundary conditions</span>
    <span class="s3">for </span><span class="s1">(</span><span class="s3">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s3">; </span><span class="s1">i &lt; Nx</span><span class="s3">; </span><span class="s1">i++) {</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">int </span><span class="s1">j = </span><span class="s4">0</span><span class="s3">; </span><span class="s1">j &lt; Ny</span><span class="s3">; </span><span class="s1">j++) {</span>
            <span class="s3">if </span><span class="s1">(</span><span class="s4">0 </span><span class="s1">&lt;= i &amp;&amp; i &lt;= </span><span class="s4">20 </span><span class="s1">&amp;&amp; j == Ny - </span><span class="s4">1</span><span class="s1">) {</span>
                <span class="s1">Temperature[i][j] = </span><span class="s4">3 </span><span class="s1">* i + </span><span class="s4">60</span><span class="s3">;     </span><span class="s5">// chip #1</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s4">20 </span><span class="s1">&lt;= i &amp;&amp; i &lt;= </span><span class="s4">50 </span><span class="s1">&amp;&amp; j == Ny - </span><span class="s4">1</span><span class="s1">) {</span>
                <span class="s1">Temperature[i][j] = -</span><span class="s4">3 </span><span class="s1">* i + </span><span class="s4">180</span><span class="s3">;   </span><span class="s5">// Top Edge B.C</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s4">0 </span><span class="s1">&lt;= i &amp;&amp; i &lt;= </span><span class="s4">10 </span><span class="s1">&amp;&amp; j == </span><span class="s4">0</span><span class="s1">) {</span>
                <span class="s1">Temperature[i][j] = </span><span class="s4">7 </span><span class="s1">* i + </span><span class="s4">40</span><span class="s3">;     </span><span class="s5">// chip #2</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s4">10 </span><span class="s1">&lt;= i &amp;&amp; i &lt;= </span><span class="s4">20 </span><span class="s1">&amp;&amp; j == </span><span class="s4">0</span><span class="s1">) {</span>
                <span class="s1">Temperature[i][j] = -</span><span class="s4">3 </span><span class="s1">* i + </span><span class="s4">140</span><span class="s3">;   </span><span class="s5">// Bottom Edge B.C 1</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s4">20 </span><span class="s1">&lt;= i &amp;&amp; i &lt;= </span><span class="s4">40 </span><span class="s1">&amp;&amp; j == </span><span class="s4">0</span><span class="s1">) {</span>
                <span class="s1">iplus++</span><span class="s3">;</span>
                <span class="s1">Temperature[i][j] = </span><span class="s4">2 </span><span class="s1">* iplus + </span><span class="s4">80</span><span class="s3">;     </span><span class="s5">// chip #3</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s4">40 </span><span class="s1">&lt;= i &amp;&amp; i &lt;= </span><span class="s4">50 </span><span class="s1">&amp;&amp; j == </span><span class="s4">0</span><span class="s1">) {</span>
                <span class="s1">Temperature[i][j] = -</span><span class="s4">9 </span><span class="s1">* i + </span><span class="s4">480</span><span class="s3">;   </span><span class="s5">// Bottom Edge B.C 2</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s4">0 </span><span class="s1">&lt;= j &amp;&amp; j &lt;= </span><span class="s4">25 </span><span class="s1">&amp;&amp; i == </span><span class="s4">0</span><span class="s1">) {</span>
                <span class="s1">Temperature[i][j] = </span><span class="s4">0.4 </span><span class="s1">* j + </span><span class="s4">40</span><span class="s3">;   </span><span class="s5">// Left Edge B.C</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s4">0 </span><span class="s1">&lt;= j &amp;&amp; j &lt;= </span><span class="s4">5 </span><span class="s1">&amp;&amp; i == Nx - </span><span class="s4">1</span><span class="s1">) {</span>
                <span class="s1">Temperature[i][j] = -j + </span><span class="s4">30</span><span class="s3">;        </span><span class="s5">// Right Edge B.C 1</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s4">6 </span><span class="s1">&lt;= j &amp;&amp; j &lt;= </span><span class="s4">20 </span><span class="s1">&amp;&amp; i == Nx - </span><span class="s4">1</span><span class="s1">) {</span>
                <span class="s1">Temperature[i][j] = </span><span class="s4">20</span><span class="s3">;             </span><span class="s5">// Cooling Fin</span>
            <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s4">21 </span><span class="s1">&lt;= j &amp;&amp; j &lt;= </span><span class="s4">25 </span><span class="s1">&amp;&amp; i == Nx - </span><span class="s4">1</span><span class="s1">) {</span>
                <span class="s1">Temperature[i][j] = j - </span><span class="s4">20</span><span class="s3">;        </span><span class="s5">// Right Edge B.C 2</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s3">for </span><span class="s1">(</span><span class="s3">int </span><span class="s1">k = </span><span class="s4">0</span><span class="s3">; </span><span class="s1">k &lt; nt</span><span class="s3">; </span><span class="s1">k++) {</span>
        <span class="s1">std::vector&lt;std::vector&lt;</span><span class="s3">double</span><span class="s1">&gt;&gt; CTemperature = Temperature</span><span class="s3">;</span>

        <span class="s3">for </span><span class="s1">(</span><span class="s3">int </span><span class="s1">i = </span><span class="s4">1</span><span class="s3">; </span><span class="s1">i &lt; Nx - </span><span class="s4">1</span><span class="s3">; </span><span class="s1">i++) {</span>
            <span class="s3">for </span><span class="s1">(</span><span class="s3">int </span><span class="s1">j = </span><span class="s4">1</span><span class="s3">; </span><span class="s1">j &lt; Ny - </span><span class="s4">1</span><span class="s3">; </span><span class="s1">j++) {</span>
                <span class="s3">double </span><span class="s1">q = a * (</span><span class="s4">1 </span><span class="s1">+ CTemperature[i][j] / </span><span class="s4">50</span><span class="s1">)</span><span class="s3">;</span>
                <span class="s1">Temperature[i][j] = CTemperature[i][j] + (q * dt / C) * ((CTemperature[i+</span><span class="s4">1</span><span class="s1">][j] - </span><span class="s4">2 </span><span class="s1">* CTemperature[i][j] + CTemperature[i-</span><span class="s4">1</span><span class="s1">][j]) / (dx * dx) + (CTemperature[i][j+</span><span class="s4">1</span><span class="s1">] - </span><span class="s4">2 </span><span class="s1">* CTemperature[i][j] + CTemperature[i][j-</span><span class="s4">1</span><span class="s1">]) / (dy * dy))</span><span class="s3">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">// Export</span>
    <span class="s1">std::ofstream file(</span><span class="s2">&quot;BoardTempNew.PLT&quot;</span><span class="s1">)</span><span class="s3">;</span>
    <span class="s1">file &lt;&lt; </span><span class="s2">&quot;TITLE = </span><span class="s3">\&quot;</span><span class="s2">Temperature Distribution</span><span class="s3">\&quot;\n</span><span class="s2">&quot;</span><span class="s3">;</span>
    <span class="s1">file &lt;&lt; </span><span class="s2">&quot;VARIABLES = </span><span class="s3">\&quot;</span><span class="s2">i</span><span class="s3">\&quot;</span><span class="s2">, </span><span class="s3">\&quot;</span><span class="s2">j</span><span class="s3">\&quot;</span><span class="s2">, </span><span class="s3">\&quot;</span><span class="s2">Temperature</span><span class="s3">\&quot;\n</span><span class="s2">&quot;</span><span class="s3">;</span>
    <span class="s1">file &lt;&lt; </span><span class="s2">&quot;ZONE T=</span><span class="s3">\&quot;</span><span class="s2">Temperature Distribution</span><span class="s3">\&quot;</span><span class="s2">, I=&quot; </span><span class="s1">&lt;&lt; Nx &lt;&lt; </span><span class="s2">&quot;, J=&quot; </span><span class="s1">&lt;&lt; Ny &lt;&lt; </span><span class="s2">&quot;, F=POINT</span><span class="s3">\n</span><span class="s2">&quot;</span><span class="s3">;</span>
    <span class="s3">for </span><span class="s1">(</span><span class="s3">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s3">; </span><span class="s1">i &lt; Nx</span><span class="s3">; </span><span class="s1">i++) {</span>
        <span class="s3">for </span><span class="s1">(</span><span class="s3">int </span><span class="s1">j = </span><span class="s4">0</span><span class="s3">; </span><span class="s1">j &lt; Ny</span><span class="s3">; </span><span class="s1">j++) {</span>
            <span class="s1">file &lt;&lt; i &lt;&lt; </span><span class="s2">&quot; &quot; </span><span class="s1">&lt;&lt; j &lt;&lt; </span><span class="s2">&quot; &quot; </span><span class="s1">&lt;&lt; Temperature[i][j] &lt;&lt; </span><span class="s2">&quot;</span><span class="s3">\n</span><span class="s2">&quot;</span><span class="s3">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">file.close()</span><span class="s3">;</span>

    <span class="s3">return </span><span class="s4">0</span><span class="s3">;</span>
<span class="s1">}</span></pre>
</body>
</html>